{"version":3,"file":"src_pages_login_vue.619a850ecfadc8734101.hot-update.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACwE;AAC/B;AAGlC,IAAMM,QAAQ,GAAC,SAATA,QAAQ,GAAC;EAClB,IAAMC,gBAAgB,GAACJ,wCAAG,CAAe,IAAI,CAAC;EAC9C,IAAMK,QAAQ,GAAGH,2CAAM,CAAa,UAAU,CAAC;EAI/C,IAAMI,OAAO,GAACC,2BAAoB;EAClC,IAAMG,UAAU,GAACH,0BAAuB;EAExC,IAAMK,YAAY,GAACZ,wCAAG,CAAS,EAAE,CAAC;EAClC,IAAMa,QAAQ,GAACZ,6CAAQ,CAAa;IAChCa,QAAQ,EAAC,WAAW;IACpBC,QAAQ,EAAC,aAAa;IACtBC,UAAU,EAAC;GACd,CAAC;EAEF,IAAMC,WAAW,GAAG,SAAdA,WAAW,GAAG;IAAA;;;QAChB,IAAGJ,QAAQ,CAACE,QAAQ,CAACG,KAAK,CAACpB,wDAAa,CAAC,IAAIe,QAAQ,CAACC,QAAQ,CAACI,KAAK,CAACrB,wDAAa,CAAC,EAAC;UAC1EsB,aAAa,GAACpB,0DAAW,CAACc,QAAQ,CAACC,QAAQ,EAACD,QAAQ,CAACE,QAAQ,CAAC;UACpEX,gBAAgB,CAACgB,KAAK,GAAC,IAAI;UAC3BR,YAAY,CAACQ,KAAK,GAAC,EAAE;UACrBC,KAAK,CAACf,OAAO,GAAC,OAAO,EAAC;YAClBgB,MAAM,EAAC,MAAM;YACbC,IAAI,EAACJ,aAAa,CAACI,IAAI;YACvBC,OAAO,EAACL,aAAa,CAACM;WACzB,CAAC,CAACC,IAAI,CAAC,kBAAQ;YAAE,eAAQ,CAACC,IAAI,EAAE;UAAf,CAAe,CAAC,CAACD,IAAI,CAAC,kBAAQ;YAC5CE,OAAO,CAACC,GAAG,CAACC,QAAQ,CAAC;YACrB,IAAGjB,QAAQ,CAACG,UAAU,EAAC;cACnBX,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAE0B,GAAG,CAACrB,UAAoB,EAACoB,QAAQ,CAAC;cAE5CE,SAAS,CAACtB,UAAU,EAAC;gBACjBuB,MAAM,EAAC,EAAE,GAAC,EAAE,GAAC,EAAE,GAAC,EAAE;gBAClBC,IAAI,EAAC;eACR,CAAC,CAACd,KAAK,GAACe,KAAK;;UAKtB,CAAC,CAAC,CAACC,KAAK,CAAC,aAAG;YAGRxB,YAAY,CAACQ,KAAK,GAAC,kDAAkD;YACrEQ,OAAO,CAACC,GAAG,CAACQ,GAAG,CAAC;UACpB,CAAC,CAAC,CAACC,OAAO,CAAC;YACPlC,gBAAgB,CAACgB,KAAK,GAAC,KAAK;UAChC,CAAC,CAAC;;;;;GAGT;EAGD,OAAM;IACFP,QAAQ;IAACI,WAAW;IAACpB,aAAa;IAACC,aAAa;IAACM,gBAAgB;IAACQ,YAAY;GACjF;AACL,CAAC","sources":["webpack://template/./src/composables/useLogin.ts"],"sourcesContent":["import {IUser_Data} from \"../utils/Types\";\r\nimport {usernameRegex,passwordRegex,loginEncode} from \"../utils/Helper\";\r\nimport {ref, reactive,inject} from \"vue\";\r\nimport {VueCookies} from \"vue-cookies\";\r\n\r\nexport const useLogin=()=>{\r\n    const loginRequestFlag=ref<boolean|null>(null)\r\n    const $cookies = inject<VueCookies>('$cookies');\r\n\r\n    // const {isLogin,username,}=useStates()\r\n\r\n    const apiBase=process.env.API_BASE\r\n    const cookieName=process.env.COOKIE_NAME\r\n\r\n    const errorMessage=ref<string>('')\r\n    const userData=reactive<IUser_Data>({\r\n        username:'hooman_77',\r\n        password:'13777731Ho@',\r\n        rememberMe:false\r\n    })\r\n\r\n    const formHandler = async () => {\r\n        if(userData.password.match(passwordRegex) && userData.username.match(usernameRegex)){\r\n            const requestOption=loginEncode(userData.username,userData.password)\r\n            loginRequestFlag.value=true\r\n            errorMessage.value=''\r\n            fetch(apiBase+'token',{\r\n                method:'POST',\r\n                body:requestOption.body,\r\n                headers:requestOption.header,\r\n            }).then(response=>response.json()).then(response=>{\r\n                console.log(response)\r\n                if(userData.rememberMe){\r\n                    $cookies?.set(cookieName as string,response)\r\n\r\n                    useCookie(cookieName,{\r\n                        maxAge:10*24*60*60,\r\n                        path:'/',\r\n                    }).value=token;\r\n                }\r\n                // username.value=userData.username\r\n                // isLogin.value=true\r\n                // return navigateTo({name:'DASHBOARD'})\r\n            }).catch(err=>{\r\n                // isLogin.value=false\r\n                // username.value=''\r\n                errorMessage.value='Error in connecting to server! please try again.'\r\n                console.log(err)\r\n            }).finally(()=>{\r\n                loginRequestFlag.value=false\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n\r\n    return{\r\n        userData,formHandler,usernameRegex,passwordRegex,loginRequestFlag,errorMessage\r\n    }\r\n}"],"names":["usernameRegex","passwordRegex","loginEncode","ref","reactive","inject","useLogin","loginRequestFlag","$cookies","apiBase","process","env","API_BASE","cookieName","COOKIE_NAME","errorMessage","userData","username","password","rememberMe","formHandler","match","requestOption","value","fetch","method","body","headers","header","then","json","console","log","response","set","useCookie","maxAge","path","token","catch","err","finally"],"sourceRoot":""}